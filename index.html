<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Javascript event emitter with Map/Set sugar: arbitrary-emitter</title>
  <link rel="stylesheet" href="dist/normalize.css">
  <link rel="stylesheet" href="css/prism.css">
  <link rel="stylesheet" href="css/main.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700,600italic,800,800italic' rel='stylesheet' type='text/css'>
</head>
<body>
  <div class="container">

<a class="g-link" href="https://github.com/jacoborus/arbitrary-emitter">github.com/jacoborus/arbitrary-emitter</a> <a class="author-link" href="http://jacoborus.codes">jacoborus.codes</a>
<h1 id="arbitrary-emitter">arbitrary-emitter</h1>

<p class="cite">Event emitter with Map/Set sugar for modern browsers and node.js. </p>

<p><a href="https://travis-ci.org/jacoborus/arbitrary-emitter"><img src="https://travis-ci.org/jacoborus/arbitrary-emitter.svg?branch=master" alt="Build Status" title=""></a> <a href="https://www.npmjs.com/package/arbitrary-emitter"><img src="https://badge.fury.io/js/arbitrary-emitter.svg" alt="npm version" title=""></a></p>

<p><strong>arbitrary-emitter</strong> stores listeners and actions in Maps, this allows to use arbitrary values as keys for your listeners.</p>

<p>It’s written in vanilla ES6, so you will have to transpile it before using it in old browsers or node.js &lt; v5.9</p>



<h2 id="features">Features</h2>

<ul>
<li>works in browsers and node.js</li>
<li>allows to use <strong>arbitrary values</strong> as keys for listeners</li>
<li>really small footprint (<strong>~500 bytes</strong> when gzipped)</li>
<li><strong>blazing fast</strong></li>
<li>conventional api (<code>on</code>, <code>off</code>, <code>once</code> and <code>emit</code>)</li>
<li><code>on</code> method returns an unsubscription function (like in redux.js)</li>
</ul>



<h2 id="usage">Usage</h2>

<p>Install with <a href="https://www.npmjs.com/package/arbitrary-emitter">npm</a>, clone the repo or download and extract the <a href="https://github.com/jacoborus/arbitrary-emitter/archive/master.zip">zip</a>. Then import or insert it as script tag.</p>



<pre class="prettyprint"><code class="language-js hljs "><span class="hljs-keyword">const</span> emitter = arbitraryEmitter()
<span class="hljs-keyword">const</span> obj = {}
emitter.on(obj, () =&gt; doSomething())
<span class="hljs-comment">// will `doSomething`</span>
emitter.emit(obj)</code></pre>



<h2 id="emitter-api">Emitter API</h2>

<p><a></a></p>



<h3 id="onkey-action">on(key, action)</h3>

<p>Adds the listener <code>action</code> to the <code>Set</code> for the event tagged with <code>key</code>.  <br>
<code>key</code> can be any type of value.</p>

<p><code>on</code> returns removeListener  method</p>



<pre class="prettyprint"><code class="language-js hljs "><span class="hljs-keyword">const</span> obj = {}
<span class="hljs-keyword">let</span> removeListener = emitter.on(obj, () =&gt; doSomething())
emitter.emit(obj) <span class="hljs-comment">// will `doSomething`</span>
emitter.emit(obj) <span class="hljs-comment">// will `doSomething`</span>
removeListener()
emitter.emit(obj) <span class="hljs-comment">// won't do anything</span></code></pre>

<p><a></a></p>



<h3 id="oncekey-action">once(key, action)</h3>

<p>Adds the listener <code>action</code> to the <code>Set</code> for the event tagged with <code>key</code>. <code>action</code> will be triggered just one time, then it will be removed. <br>
<code>key</code> can be any type of value</p>



<pre class="prettyprint"><code class="language-js hljs "><span class="hljs-keyword">const</span> obj = {}
emitter.once(obj, () =&gt; doSomethingOnce())
emitter.emit(obj) <span class="hljs-comment">// will `doSomethingOnce`</span>
emitter.emit(obj) <span class="hljs-comment">// won't do anything</span></code></pre>

<p><a></a></p>



<h3 id="emitkey-args">emit(key[, …args])</h3>

<p>Synchronously calls each of the listeners registered for the event tagged with <code>key</code>, and pass the rest of the arguments to them</p>



<pre class="prettyprint"><code class="language-js hljs ">emitter.on(<span class="hljs-string">'test'</span>, (a, b) =&gt; console.log(a + b))
emitter.emit(<span class="hljs-string">'test'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>) <span class="hljs-comment">// =&gt; 3</span></code></pre>

<p><a></a></p>



<h3 id="offkey-action">off(key[, action])</h3>

<p>Remove <code>action</code> from listeners tagged with <code>key</code>. If no <code>action</code> is specified will remove all listeners tagged with <code>key</code></p>



<pre class="prettyprint"><code class="language-js hljs ">emitter.off(key, action) <span class="hljs-comment">// will remove action from listeners</span>
emitter.off(key) <span class="hljs-comment">// will remove all the listeners tagged with `key`, and the tag itself</span></code></pre>

<p><a></a></p>



<h2 id="testing">Testing</h2>



<h3 id="node">Node</h3>



<pre class="prettyprint"><code class="language-sh hljs coffeescript"><span class="hljs-built_in">npm</span> test</code></pre>



<h3 id="browser">Browser</h3>

<p>Build browser tests (<code>npm run build-tests</code>) and open <code>test/test.html</code></p>

<p><a></a></p>



<h2 id="building">Building</h2>

<ul>
<li>Build UMD file: <code>npm run build-umd</code></li>
<li>Build browser tests: <code>npm run build-tests</code></li>
<li>Run both builds: <code>npm run build</code></li>
</ul>

<p><br><br></p>

<hr>

<p>© 2016 <a href="https://github.com/jacoborus">Jacobo Tabernero</a> - Released under <a href="https://raw.github.com/jacoborus/arbitrary-emitter/master/LICENSE">MIT License</a></p>


  </div>
  <script src="js/prism.js"></script>
</body>
</html>
